<p><%= link_to 'Voltar ao estoque', admin_filial_items_path(@filial), class: 'btn btn-secondary mb-3' %></p>

<h3>Editar o item "<%= @item.name %>"</h3>

<%= form_with(model: [@filial, @item], url: admin_filial_item_path(@filial, @item), local: true, method: :patch, html: { class: 'form-horizontal py-4' }) do |form| %>
  <% if @item.errors.any? %>
    <div id="error_explanation" class="alert alert-danger">
      <h2><%= pluralize(@item.errors.count, "erro") %> impediram este item de ser salvo:</h2>
      <ul>
        <% @item.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="form-group row">
    <%= form.label :name, 'Nome', class: 'col-sm-2 col-form-label' %>
    <div class="col-sm-10">
      <%= form.text_field :name, class: 'form-control' %>
    </div>
  </div>

  <div class="form-group row">
    <%= form.label :quantity, 'Quantidade', class: 'col-sm-2 col-form-label' %>
    <div class="col-sm-10">
      <%= form.number_field :quantity, class: 'form-control' %>
    </div>
  </div>

  <div class="form-group row">
    <%= form.label :category, 'Categoria', class: 'col-sm-2 col-form-label' %>
    <div class="col-sm-10">
      <%= form.select :category, options_for_select(Item::CATEGORIES, @item.category), {}, class: 'form-control' %>
    </div>
  </div>

  <div class="form-group">
    <%= form.label :description %>
    <%= form.text_area :description, class: 'form-control' %>
  </div>

  <div class="form-group">
    <%= form.label :price %>
    <%= form.number_field :price, step: 0.01, class: 'form-control' %>
  </div>

  <div class="form-group row">
    <%= form.label :critical_stock, 'Estoque CrÃ­tico', class: 'col-sm-2 col-form-label' %>
    <div class="col-sm-10">
      <%= form.number_field :critical_stock, class: 'form-control' %>
    </div>
  </div>

  <div class="form-group row">
    <%= form.label :image, 'Imagem', class: 'col-sm-2 col-form-label' %>
    <div class="col-sm-10">
      <%= form.file_field :image, class: 'form-control-file' %>
    </div>
  </div>

  <div class="form-group">
    <%= form.label :show_in_marketplace, 'Show on Marketplace?' %>
    <%= form.check_box :show_in_marketplace %>
  </div>

  <div class="form-group row">
    <div class="col-sm-10 offset-sm-2">
      <%= form.submit 'Salvar', class: 'btn btn-primary' %>
    </div>
  </div>
<% end %>

<br>
<p><%= link_to 'Excluir esse produto do estoque', admin_filial_item_path(@filial, @item), data: { turbo_method: :delete, confirm: 'Are you sure?' }, class: 'btn btn-danger ml-2' %></p>
