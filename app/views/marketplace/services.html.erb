<h1>Available Services</h1>
<div class="service-cards-container">
  <% @services.each do |service| %>
    <div class="service-card">
      <div class="service-image">
        <% if service.images.attached? %>
          <% service.images.each do |image| %>
            <img src="<%=image.url%>" alt="" class="" style="max-height: 200px; max-width: 200px">
          <% end %>
        <% else %>
          <p>No Image Available</p>
        <% end %>
      </div>

      <div class="service-details">
        <h2><%= service.name %></h2>
        <p><%= service.description %></p>
        <p><strong>Price:</strong> <%= number_to_currency(service.price) %></p>
      </div>

      <div class="service-actions">
        <%= link_to 'View Service', service_path(service) %>
      </div>
    </div>
  <% end %>
</div>

<h2>Your Cart</h2>

<% if @cart_items.present? %>
  <% @cart_items.each do |cart_item| %>
    <div class="cart-item">
      <h4><%= cart_item.item&.name || cart_item.service&.name %></h4>
      <p>Price: <%= number_to_currency(cart_item.item&.price || cart_item.service&.price) %></p>

      <%= form_with url: add_item_path, method: :post, local: true do |f| %>
        <%= hidden_field_tag :item_id, cart_item.item_id if cart_item.item.present? %>
        <%= hidden_field_tag :service_id, cart_item.service_id if cart_item.service.present? %>
        <%= number_field_tag :quantity, cart_item.quantity, min: 1 %>
        <%= submit_tag "Update Quantity", class: "btn btn-secondary" %>
      <% end %>

      <%= button_to "Remove", remove_item_path(cart_item), method: :delete, class: "btn btn-danger" %>
    </div>
  <% end %>
<% else %>
  <p>Your cart is empty.</p>
<% end %>
